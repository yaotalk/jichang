<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"  >
<head>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta charset="utf-8" />
        <title>小视科技视频监控平台</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
        <!-- <meta name="_csrf" th:content="${_csrf.token}"/>
        <meta name="_csrf_header" th:content="${_csrf.headerName}"/> -->

        <!-- bootstrap & fontawesome -->
        <link rel="stylesheet" th:href="@{/assets/comps/bootstrap/css/bootstrap.min.css}" href="/assets/comps/bootstrap/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/assets/comps/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/assets/comps/jquery.confirm/jquery-confirm.min.css"/>
        <!-- ace styles -->
        <link rel="stylesheet" href="/assets/comps/ace/css/ace-fonts.css" />
        <link rel="stylesheet" href="/assets/comps/fuelux/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />
        <link rel="stylesheet" href="/assets/comps/ace/css/ace-skins.min.css" />
        <!-- page specific plugin styles -->
        <link rel="stylesheet" href="/assets/comps/ace/css/ace-rtl.min.css" />
        <!-- basic scripts -->

        <script src="/assets/comps/ace/js/ace-extra.min.js"></script>
        <script src="/assets/comps/jquery/jquery.min.js"></script>
        <script src="/assets/comps/bootstrap/js/bootstrap.min.js"></script>
        <script src="/assets/comps/fuelux/fuelux.wizard.min.js"></script>
        <script src="/assets/comps/fuelux/ace-elements.min.js"></script>
        <script src="/assets/comps/ace/js/ace.min.js"></script>
        <script type="text/javascript" src="/assets/comps/jquery.confirm/jquery-confirm.min.js"></script>

    </head>
</head>
<body class="no-skin">
<div class="main-content">
    <div class="page-content">
        <div class="row">
            <div class="col-xs-12">

                <div class="widget-body">
                    <div class="widget-main">
                        <!-- #section:plugins/fuelux.wizard -->
                        <div id="fuelux-wizard" data-target="#step-container">
                            <!-- #section:plugins/fuelux.wizard.steps -->
                            <ul class="wizard-steps">
                                <li data-target="#step1" class="active">
                                    <span class="step">1</span>
                                    <span class="title">填写用户信息</span>
                                </li>

                                <li data-target="#step2">
                                    <span class="step">2</span>
                                    <span class="title">注册完成</span>
                                </li>
                            </ul>
                        </div>

                        <hr />
                        <div class="step-content pos-rel" id="step-container">
                            <div class="step-pane active" id="step1">
                                <h3 class="lighter block green" style="text-align: center">填写初始用户信息</h3>

                                <form class="form-horizontal" id="sample-form">
                                    <!-- #section:elements.form.input-state -->
                                    <div class="form-group has-warning">
                                        <label for="username" class="col-xs-12 col-sm-4 control-label no-padding-right">用户名称</label>

                                        <div class="col-xs-12 col-sm-4">
																<span class="block input-icon input-icon-right">
																	<input type="text" id="username" class="width-100" />
																	<i class="ace-icon fa fa-leaf"></i>
																</span>
                                        </div>

                                    </div>
                                    <div class="form-group has-warning">
                                        <label for="password" class="col-xs-12 col-sm-4 control-label no-padding-right">用户密码</label>
                                        <div class="col-xs-12 col-sm-4">
																<span class="block input-icon input-icon-right">
																	<input type="password" id="password" class="width-100" />
																	<i class="ace-icon fa fa-leaf"></i>
																</span>
                                        </div>

                                    </div>
                                    <div class="form-group has-warning">
                                        <label for="confirmPassword" class="col-xs-12 col-sm-4 control-label no-padding-right">确认密码</label>
                                        <div class="col-xs-12 col-sm-4">
																<span class="block input-icon input-icon-right">
																	<input type="password" id="confirmPassword" class="width-100" />
																	<i class="ace-icon fa fa-leaf"></i>
																</span>
                                        </div>

                                    </div>
                                </form>

                            </div>

                            <div class="step-pane" id="step2">
                                <div class="center">
                                    <h3 class="green">注册完成!</h3>
                                    初始化用户成功，3秒后自动跳转，如未跳转，请点击登录进行重新登录
                                </div>
                            </div>
                        </div>

                        <hr />
                        <div class="wizard-actions">
                            <!-- #section:plugins/fuelux.wizard.buttons -->
                            <!--<button class="btn btn-prev">-->
                                <!--<i class="ace-icon fa fa-arrow-left"></i>-->
                                <!--Prev-->
                            <!--</button>-->

                            <button class="btn btn-success btn-next" data-last="重新登录">
                                下一步
                                <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
                            </button>
                        </div>

                        <!-- /section:plugins/fuelux.wizard -->
                    </div><!-- /.widget-main -->
                </div><!-- /.widget-body -->
            </div>

            <!--<div id="modal-wizard" class="modal">-->
                <!--<div class="modal-dialog">-->
                    <!--<div class="modal-content">-->
                        <!--<div class="modal-header" data-target="#modal-step-contents">-->
                            <!--<ul class="wizard-steps">-->
                                <!--<li data-target="#modal-step1" class="active">-->
                                    <!--<span class="step">1</span>-->
                                    <!--<span class="title">Validation states</span>-->
                                <!--</li>-->
                                <!--<li data-target="#modal-step2">-->
                                    <!--<span class="step">2</span>-->
                                    <!--<span class="title">Other Info</span>-->
                                <!--</li>-->
                            <!--</ul>-->
                        <!--</div>-->

                        <!--<div class="modal-body step-content" id="modal-step-contents">-->
                            <!--<div class="step-pane active" id="modal-step1">-->
                                <!--<div class="center">-->
                                    <!--<h4 class="blue">Step 1</h4>-->
                                <!--</div>-->
                            <!--</div>-->


                            <!--<div class="step-pane" id="modal-step2">-->
                                <!--<div class="center">-->
                                    <!--<h4 class="blue">Step 2</h4>-->
                                <!--</div>-->
                            <!--</div>-->
                        <!--</div>-->

                        <!--<div class="modal-footer wizard-actions">-->
                            <!--<button class="btn btn-sm btn-prev">-->
                                <!--<i class="ace-icon fa fa-arrow-left"></i>-->
                                <!--Prev-->
                            <!--</button>-->

                            <!--<button class="btn btn-success btn-sm btn-next" data-last="Finish">-->
                                <!--Next-->
                                <!--<i class="ace-icon fa fa-arrow-right icon-on-right"></i>-->
                            <!--</button>-->

                            <!--<button class="btn btn-danger btn-sm pull-left" data-dismiss="modal">-->
                                <!--<i class="ace-icon fa fa-times"></i>-->
                                <!--Cancel-->
                            <!--</button>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>&lt;!&ndash; PAGE CONTENT ENDS &ndash;&gt;-->
        </div><!-- /.col -->
    </div><!-- /.row -->
</div><!-- /.page-content-area -->
</div><!-- /.page-content -->
</div><!-- /.main-content -->

<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
    <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
</a>
<script>
    jQuery(function($) {
//    $('[data-rel=tooltip]').tooltip();

    $('#fuelux-wizard')
        .ace_wizard({
            //step: 2 //optional argument. wizard will jump to step "2" at first
        })
        .on('change' , function(e, info){
            if(info.step == 1) {
                if( $("#username").val().trim() === ""){
                    $.alert({
                        title: '提示',
                        content: '请输入用户名',
                    });
                    e.preventDefault();
                    return;
                }
                if($("#password").val().trim() === ""){
                    $.alert({
                        title: '提示',
                        content: '请输入密码',
                    });
                    e.preventDefault();
                    return;
                }
                if($("#password").val().trim() !== $("#confirmPassword").val().trim()){
                    $.alert({
                        title: '提示',
                        content: '密码与确认密码不一致',
                    });
                    e.preventDefault();
                    return;
                }
                var data = [];
                data.push({name:"username",value:$("#username").val().trim()})
                data.push({name:"password",value:$("#password").val().trim()})
                var roleIds = [];
                roleIds.push(1);
                roleIds.push(2);
                data.push({name:"roles",value:roleIds});
                $.ajax({
                    url:'/user/initUser',
                    data: data,
                    type: 'POST',
                    dataType:"text",
                    success: function(result) {
                        setTimeout(function () {
                            location.href= '/login';
                        },3000)
                    },
                    error:function(errorcode,msg){
                        alert(msg)
                    }
                });
            }
        })
        .on('finished', function(e) {
//            bootbox.dialog({
//                message: "Thank you! Your information was successfully saved!",
//                buttons: {
//                    "success" : {
//                        "label" : "OK",
//                        "className" : "btn-sm btn-primary"
//                    }
//                }
//            });
            location.href = '/faceset'
        }).on('stepclick', function(e){
        e.preventDefault();//this will prevent clicking and selecting steps
    });


    //jump to a step
    $('#step-jump').on('click', function() {
        var wizard = $('#fuelux-wizard').data('wizard')
        wizard.currentStep = 3;
        wizard.setState();
    })
    //determine selected step
    //wizard.selectedItem().step

    $('#modal-wizard .modal-header').ace_wizard();
    $('#modal-wizard .wizard-actions .btn[data-dismiss=modal]').removeAttr('disabled');
//    $(".btn-next").on('click',function () {
//
//        $(".btn-next").unbind('click');
//      });
  })
</script>
</body>
</div>
</html>
